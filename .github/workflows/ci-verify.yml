name: "âœ… CI Verification"

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  verify:
    name: ğŸ“‹ Verify Repository
    runs-on: ubuntu-latest
    timeout-minutes: 3
    
    steps:
    - name: ğŸš€ Checkout code
      uses: actions/checkout@v4
    
    - name: ğŸ“Š Verify Structure
      run: |
        echo "ğŸ” IXIMI Legacy - Repository Verification"
        echo "========================================="
        echo ""
        
        # Check essential files
        echo "ğŸ“„ Essential Files Check:"
        declare -A files
        files["README.md"]="Project documentation"
        files["LICENSE"]="MIT License"
        files["package.json"]="Node.js configuration"
        files["index.js"]="Main application"
        files[".gitignore"]="Git ignore rules"
        
        all_good=true
        for file in "${!files[@]}"; do
          if [[ -f "$file" ]]; then
            echo "âœ… $file - ${files[$file]}"
          else
            echo "âŒ $file - MISSING"
            all_good=false
          fi
        done
        
        echo ""
        echo "ğŸ“ Directory Structure:"
        ls -la
        
        echo ""
        echo "ğŸ“ˆ Repository Metrics:"
        echo "- Total files: $(find . -type f -not -path "./.git/*" | wc -l)"
        echo "- JavaScript files: $(find . -name "*.js" -type f | wc -l)"
        echo "- Total size: $(du -sh . | cut -f1)"
        
        echo ""
        if $all_good; then
          echo "ğŸ‰ VERIFICATION: âœ… ALL CHECKS PASSED"
          echo "ğŸš€ IXIMI Legacy is ready for development!"
        else
          echo "âš ï¸  VERIFICATION: âŒ SOME FILES MISSING"
          echo "ğŸ”§ Please check the missing files above"
          exit 1
        fi
    
    - name: ğŸ¯ Success Message
      if: success()
      run: |
        echo "========================================"
        echo "ğŸ’ IXIMI LEGACY - CI VERIFICATION"
        echo "========================================"
        echo "Status: âœ… SUCCESS"
        echo "Project: Blockchain for indigenous textiles"
        echo "Author: EstefanÃ­a PÃ©rez VÃ¡zquez"
        echo "Email: legacyiximi@gmail.com"
        echo "Mission: Cultural preservation through technology"
        echo "========================================"
