name: CI Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  verify:
    runs-on: ubuntu-latest
    name: Verify Repository
    timeout-minutes: 5
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Verify IXIMI Legacy Structure
      run: |
        echo "ğŸ” Verificando estructura de IXIMI Legacy..."
        echo ""
        
        # Verificar archivos esenciales
        echo "ğŸ“„ Archivos esenciales:"
        if [ -f "README.md" ]; then
          echo "âœ… README.md encontrado"
          echo "   TÃ­tulo: $(head -1 README.md)"
        else
          echo "âŒ README.md no encontrado"
        fi
        
        if [ -f "LICENSE" ]; then
          echo "âœ… LICENSE encontrado"
        else
          echo "âŒ LICENSE no encontrado"
        fi
        
        if [ -f "package.json" ]; then
          echo "âœ… package.json encontrado"
          echo "   Proyecto: $(grep '"name"' package.json | head -1)"
        else
          echo "âŒ package.json no encontrado"
        fi
        
        echo ""
        echo "ğŸ“ Estructura de carpetas:"
        ls -la
        
        echo ""
        echo "ğŸ¯ VerificaciÃ³n completada exitosamente!"
        echo "âœ… IXIMI Legacy estÃ¡ correctamente configurado"
        echo "ğŸŒ https://github.com/legacyiximi-afk/iximi-legacy"
    
    - name: Success Status
      run: |
        echo "ğŸš€ IXIMI Legacy CI Pipeline - SUCCESS"
        echo "====================================="
        echo "Status: âœ… VERIFIED"
        echo "Project: Blockchain for indigenous textiles"
        echo "Author: EstefanÃ­a PÃ©rez VÃ¡zquez"
        echo "Email: legacyiximi@gmail.com"
        echo "Mission: Cultural preservation through blockchain"
        echo "====================================="

  docs:
    runs-on: ubuntu-latest
    name: Generate Documentation
    if: github.event_name == 'push' && github.ref == 'refs/heads/main'
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    
    - name: Create Basic Documentation
      run: |
        echo "ğŸ“š Generando documentaciÃ³n para IXIMI Legacy..."
        mkdir -p docs
        echo "# IXIMI Legacy Documentation" > docs/index.md
        echo "" >> docs/index.md
        echo "## Quick Start" >> docs/index.md
        echo "- Clone: \`git clone https://github.com/legacyiximi-afk/iximi-legacy\`" >> docs/index.md
        echo "- Install: \`npm install\`" >> docs/index.md
        echo "- Develop: \`npm run dev\`" >> docs/index.md
        echo "" >> docs/index.md
        echo "## Mission" >> docs/index.md
        echo "Blockchain certification system for indigenous Mexican textiles." >> docs/index.md
        echo "" >> docs/index.md
        echo "*Generated by GitHub Actions on $(date)*" >> docs/index.md
        
        echo "âœ… DocumentaciÃ³n generada en docs/index.md"
